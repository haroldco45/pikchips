<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PIK CHIPS - App Oficial</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #FFD700; --secondary: #e63946; --dark: #1a1a1a; --light: #f4f4f4;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Arial Black', sans-serif; }
        body { background-color: var(--light); padding-bottom: 120px; }

        /* Pantalla Mantenimiento */
        #maintenance { display: none; position: fixed; inset: 0; background: var(--dark); color: white; z-index: 10000; text-align: center; padding-top: 40%; }
        
        /* Encabezado y Logo */
        header { background: var(--dark); padding: 20px; text-align: center; border-bottom: 5px solid var(--primary); position: relative; }
        .logo-container img { max-width: 150px; height: auto; } /* Aqu√≠ ir√° tu logo */
        .datetime { color: white; font-size: 0.7rem; font-family: sans-serif; margin-top: 10px; }

        /* Datos Comprador */
        .buyer-info { background: white; margin: 10px; padding: 15px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .buyer-info input { width: 100%; padding: 10px; margin-top: 8px; border: 1px solid #ddd; border-radius: 5px; font-family: sans-serif; }

        /* Men√∫ */
        .container { padding: 10px; }
        .card { background: white; border-radius: 15px; margin-bottom: 15px; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.1); display: flex; flex-direction: column; }
        .card-body { padding: 15px; }
        .card-title { font-size: 1.1rem; text-transform: uppercase; color: var(--dark); }
        .card-price { color: var(--secondary); font-size: 1.2rem; margin: 5px 0; }
        
        /* Controles de Cantidad */
        .controls { display: flex; align-items: center; justify-content: space-between; margin-top: 10px; }
        .qty-btns { display: flex; align-items: center; gap: 15px; }
        .btn-qty { background: var(--dark); color: white; border: none; width: 35px; height: 35px; border-radius: 50%; font-size: 1.2rem; cursor: pointer; }
        .btn-qty:disabled { opacity: 0.3; }
        .qty-val { font-size: 1.2rem; width: 20px; text-align: center; }

        /* Footer Carrito */
        .cart-footer { position: fixed; bottom: 0; width: 100%; background: var(--dark); color: white; padding: 20px; display: flex; justify-content: space-between; align-items: center; border-radius: 20px 20px 0 0; }
        .btn-send { background: #25d366; color: white; border: none; padding: 12px 20px; border-radius: 10px; font-weight: bold; cursor: pointer; }

        /* Admin Oculto */
        #dev-tag { position: absolute; top: 0; right: 0; width: 40px; height: 40px; opacity: 0; }
        #admin-panel { display: none; position: fixed; top: 20%; left: 5%; width: 90%; background: white; border: 3px solid var(--dark); padding: 20px; z-index: 10001; border-radius: 15px; }
    </style>
</head>
<body>

<div id="maintenance">
    <h1>‚ö†Ô∏è APP EN MANTENIMIENTO</h1>
    <p>Estamos actualizando nuestro men√∫ para ti.</p>
</div>

<div id="dev-tag" onclick="handleDevClick()"></div>

<header>
    <div class="logo-container">
        <img src="logo.png" alt="PIK CHIPS LOGO">
    </div>
    <div class="datetime" id="reloj">Cargando fecha Colombia...</div>
</header>

<div class="buyer-info">
    <input type="text" id="name" placeholder="Tu nombre">
    <input type="text" id="address" placeholder="Direcci√≥n de env√≠o">
</div>

<div class="container" id="menu"></div>

<div class="cart-footer">
    <div>
        <p style="font-size: 0.8rem; opacity: 0.8;">Total Pedido:</p>
        <h2 id="total-price">$ 0</h2>
    </div>
    <button class="btn-send" onclick="sendOrder()">
        <i class="fab fa-whatsapp"></i> PEDIR YA
    </button>
</div>

<div id="admin-panel">
    <h3>PANEL DESARROLLADOR</h3>
    <label>Vencimiento Suscripci√≥n:</label>
    <input type="date" id="new-exp-date">
    <button onclick="saveExp()" style="width:100%; margin-top:10px; background:green; color:white; padding:10px;">GUARDAR</button>
    <button onclick="closeAdmin()" style="width:100%; margin-top:10px; background:red; color:white; padding:10px;">CERRAR</button>
</div>

<script>
    // --- CATALOGO COMPLETO ---
    const products = [
        { id: 1, name: "Solomito de Res 300g", price: 45000, desc: "+ 1 Guarnici√≥n + Ensalada" },
        { id: 2, name: "Punta de Anca 400g", price: 48000, desc: "+ 1 Guarnici√≥n + Ensalada" },
        { id: 3, name: "Pik Chips (3 Prote√≠nas)", price: 27000, desc: "S√∫per Mix + Guarnici√≥n" },
        { id: 4, name: "Pikono / Mi Pikono", price: 25000, desc: "Deditos + Papas + Gaseosa" },
        { id: 5, name: "Pikada para 2", price: 51000, desc: "6 Prote√≠nas + 3 Guarniciones" },
        { id: 6, name: "Pikada para 4", price: 68000, desc: "9 Prote√≠nas + 3 Guarniciones" },
        { id: 7, name: "Pikada Especial", price: 115000, desc: "12 Prote√≠nas + 4 Guarniciones" },
        { id: 8, name: "Pikburguer", price: 22000, desc: "Carne Res + Tocineta + Queso" },
        { id: 9, name: "Pikchuleta Pollo", price: 28000, desc: "Pollo Apanado XL + Guarnici√≥n" },
        { id: 10, name: "Pikazuela", price: 15000, desc: "Frijoles + Arroz + Guarnici√≥n" },
        { id: 11, name: "Pikpapas", price: 12000, desc: "Papas + Queso + Salsas" },
        { id: 12, name: "Jugo en Leche", price: 10000, desc: "Varios sabores" }
    ];

    let cart = {};

    function render() {
        const menu = document.getElementById('menu');
        menu.innerHTML = products.map(p => `
            <div class="card">
                <div class="card-body">
                    <div class="card-title">${p.name}</div>
                    <div class="card-desc" style="font-size:0.8rem; color:gray; font-family:sans-serif">${p.desc}</div>
                    <div class="card-price">$${(p.price).toLocaleString()}</div>
                    <div class="controls">
                        <div class="qty-btns">
                            <button class="btn-qty" onclick="changeQty(${p.id}, -1)">-</button>
                            <span class="qty-val" id="qty-${p.id}">0</span>
                            <button class="btn-qty" onclick="changeQty(${p.id}, 1)">+</button>
                        </div>
                    </div>
                </div>
            </div>
        `).join('');
    }

    function changeQty(id, delta) {
        cart[id] = (cart[id] || 0) + delta;
        if (cart[id] < 0) cart[id] = 0;
        document.getElementById(`qty-${id}`).innerText = cart[id];
        updateTotal();
    }

    function updateTotal() {
        let total = 0;
        for (let id in cart) {
            const p = products.find(prod => prod.id == id);
            total += p.price * cart[id];
        }
        document.getElementById('total-price').innerText = `$ ${total.toLocaleString()}`;
    }

    // --- LOGICA DE WHATSAPP ---
    function sendOrder() {
        const uName = document.getElementById('name').value;
        const uAddr = document.getElementById('address').value;
        if (!uName || !uAddr) return alert("Por favor ingresa nombre y direcci√≥n");

        let msg = `*NUEVO PEDIDO - PIK CHIPS*\n`;
        msg += `--------------------------\n`;
        msg += `üë§ *Cliente:* ${uName}\n`;
        msg += `üìç *Direcci√≥n:* ${uAddr}\n`;
        msg += `--------------------------\n`;
        
        let hasItems = false;
        for (let id in cart) {
            if (cart[id] > 0) {
                const p = products.find(prod => prod.id == id);
                msg += `‚úÖ ${cart[id]}x ${p.name} ($${(p.price * cart[id]).toLocaleString()})\n`;
                hasItems = true;
            }
        }

        if (!hasItems) return alert("El carrito est√° vac√≠o");

        msg += `--------------------------\n`;
        msg += `*TOTAL A PAGAR: ${document.getElementById('total-price').innerText}*`;
        
        window.open(`https://wa.me/573000000000?text=${encodeURIComponent(msg)}`);
    }

    // --- SISTEMA DESARROLLADOR ---
    let clicks = 0;
    function handleDevClick() {
        clicks++;
        if (clicks >= 5) {
            document.getElementById('admin-panel').style.display = 'block';
            clicks = 0;
        }
    }
    function closeAdmin() { document.getElementById('admin-panel').style.display = 'none'; }
    function saveExp() {
        localStorage.setItem('pik_exp', document.getElementById('new-exp-date').value);
        location.reload();
    }

    // --- CONTROL DE TIEMPO Y SUSCRIPCI√ìN ---
    function init() {
        const exp = localStorage.getItem('pik_exp') || '2026-12-31';
        if (new Date() > new Date(exp)) {
            document.getElementById('maintenance').style.display = 'block';
        }
        
        setInterval(() => {
            const now = new Date();
            document.getElementById('reloj').innerText = now.toLocaleString('es-CO', { timeZone: 'America/Bogota' });
        }, 1000);

        // Cargar datos previos
        document.getElementById('name').value = localStorage.getItem('uName') || '';
        document.getElementById('address').value = localStorage.getItem('uAddr') || '';
        
        document.getElementById('name').oninput = (e) => localStorage.setItem('uName', e.target.value);
        document.getElementById('address').oninput = (e) => localStorage.setItem('uAddr', e.target.value);

        render();
    }

    init();
</script>
</body>
</html>
